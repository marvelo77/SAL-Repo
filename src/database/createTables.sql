-- Active: 1697839897194@@10.11.33.8@3306@saldbd
/* ---------------------------------------------------- */
/*  Generated by Enterprise Architect Version 13.5 		*/
/*  Created On : 20-oct.-2023 08:48:53 				*/
/*  DBMS       : MySql 						*/
/* ---------------------------------------------------- */

SET FOREIGN_KEY_CHECKS=0 
;

/* Drop Tables */

DROP TABLE IF EXISTS `Category` CASCADE
;

DROP TABLE IF EXISTS `Order` CASCADE
;

DROP TABLE IF EXISTS `Product` CASCADE
;

DROP TABLE IF EXISTS `Productofferingprice` CASCADE
;

DROP TABLE IF EXISTS `Productorderitem` CASCADE
;

DROP TABLE IF EXISTS `Productcharacteristic` CASCADE
;

DROP TABLE IF EXISTS `Productcharacteristic_` CASCADE
;

/* Create Tables */

CREATE TABLE `Category`
(
	`CategoryID` INT NOT NULL AUTO_INCREMENT,
	`Code` VARCHAR(50) NOT NULL,
	`Name` VARCHAR(50) NOT NULL,
	`Validfor_startdatetime` DATETIME NULL,
	`Validfor_enddatetime` DATETIME NULL,
	CONSTRAINT `PK_Category` PRIMARY KEY (`CategoryID` ASC)
)

;

CREATE TABLE `Order`
(
	`OrderID` INT NOT NULL AUTO_INCREMENT,
	`Type` VARCHAR(15) NULL,
	`Status` TINYTEXT NOT NULL,
	`Creationdate` DATETIME(6) NOT NULL,
	`Lastupdate` DATETIME(6) NOT NULL,
	`Userupdate` VARCHAR(15) NULL,
	CONSTRAINT `PK_Order` PRIMARY KEY (`OrderID` ASC)
)

;

CREATE TABLE `Product`
(
	`ProductID` INT NOT NULL AUTO_INCREMENT,
	`Code` VARCHAR(50) NOT NULL,
	`Name` VARCHAR(50) NOT NULL,
	`Description` VARCHAR(50) NULL,
	`CatalogtypeID` INT NOT NULL,
	`Status` TINYTEXT NULL,
	`Quantity` INT NULL,
	CONSTRAINT `PK_Product` PRIMARY KEY (`ProductID` ASC)
)

;

CREATE TABLE `Productofferingprice`
(
	`ProductofferingpricereforvalueID` INT NOT NULL AUTO_INCREMENT,
	`ProductorderitemID` INT NULL,
	`Code` VARCHAR(50) NULL,
	`Name` VARCHAR(50) NULL,
	`Price` DOUBLE(10,2) NULL,
	`Tax` DOUBLE(10,2) NULL,
	`Validfor_startdatetime` DATETIME NULL,
	`Validfor_enddatetime` DATETIME NULL,
	CONSTRAINT `PK_Productofferingpricereforvalue` PRIMARY KEY (`ProductofferingpricereforvalueID` ASC)
)

;

CREATE TABLE `Productorderitem`
(
	`ProductorderitemID` INT NOT NULL AUTO_INCREMENT,
	`OrderID` INT NOT NULL,
	`Status` TINYTEXT NULL,
	`Action` TINYTEXT NULL,
	`ProductID` INT NULL,
	CONSTRAINT `PK_Productorderitem` PRIMARY KEY (`ProductorderitemID` ASC)
)

;

CREATE TABLE `Productcharacteristic`
(
	`ProductcharacteristicID` INT NOT NULL AUTO_INCREMENT,
	`ProductID` INT NOT NULL,
	`Name` VARCHAR(50) NULL,
	`ValueType` TINYTEXT NULL,
	`Value` VARCHAR(50) NULL,
	CONSTRAINT `PK_Productcharacteristic` PRIMARY KEY (`ProductcharacteristicID` ASC)
)

;

CREATE TABLE `Productcharacteristic_`
(
	`ProductcharacteristicID` INT NOT NULL AUTO_INCREMENT,
	`ProductID` INT NOT NULL,
	`Color` VARCHAR(15) NULL,
	`Size` CHAR(10) NULL,
	`Weight` VARCHAR(50) NULL,
	`Dimensions` VARCHAR(30) NULL,
	`Price` DECIMAL(10,2) NULL,
	CONSTRAINT `PK_Productcharacteristic_` PRIMARY KEY (`ProductcharacteristicID` ASC)
)

;

/* Create Foreign Key Constraints */

ALTER TABLE `Product` 
 ADD CONSTRAINT `FK_Product_Category`
	FOREIGN KEY (`CatalogtypeID`) REFERENCES `Category` (`CategoryID`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `Productofferingprice` 
 ADD CONSTRAINT `FK_ProductOfferingPriceRefOrValue_offeringPrice`
	FOREIGN KEY (`ProductorderitemID`) REFERENCES `Productorderitem` (`ProductorderitemID`) ON DELETE No Action ON UPDATE No Action
;

ALTER TABLE `Productorderitem` 
 ADD CONSTRAINT `FK_Productorderitem_Product`
	FOREIGN KEY (`ProductID`) REFERENCES `Product` (`ProductID`) ON DELETE Restrict ON UPDATE Restrict
;

ALTER TABLE `Productorderitem` 
 ADD CONSTRAINT `FK_Productorderitem_Order`
	FOREIGN KEY (`OrderID`) REFERENCES `Order` (`OrderID`) ON DELETE No Action ON UPDATE No Action
;

SET FOREIGN_KEY_CHECKS=1 
;

ALTER TABLE `Productcharacteristic` 
 ADD CONSTRAINT `FK_Productcharacteristic_Product`
	FOREIGN KEY (`ProductcharacteristicID`) REFERENCES `Product` (`ProductID`) ON DELETE Restrict ON UPDATE Restrict
;

/*ALTER TABLE `Productcharacteristic_` 
 ADD CONSTRAINT `FK_Productcharacteristic__Product`
	FOREIGN KEY (`ProductcharacteristicID`) REFERENCES `Product` (`ProductID`) ON DELETE Restrict ON UPDATE Restrict
;*/
